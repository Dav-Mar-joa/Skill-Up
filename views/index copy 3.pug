html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title Tâches du jour
    link(rel="manifest" href="/manifest.json")
    style.
      body {
          font-family: Arial, sans-serif;
          margin: 20px;
          padding: 20px;
          background-color: #333;
          display: flex;
          justify-content: center; /* Centre le contenu de la page */
      }
      .container {
          display: flex;
          flex-direction: row;
          width: 100%;
          max-width: 1600px;
          gap: 40px; /* Augmente l'espace entre les colonnes */
      }
      .form-container {
          flex: 1;
          width: 25%; /* Ajuste la largeur de la colonne du formulaire */
      }
      .tasks-container {
          flex: 1;
          width: 40%; /* Ajuste la largeur de la colonne des tâches */
      }
      .purchase-container {
          flex: 1;
          width: 25%; /* Ajuste la largeur de la colonne des achats */
      }
      .form {
          border: 1px solid #ccc;
          padding: 10px;
          border-radius: 5px;
          background-color: #f9f9f9;
          margin-bottom: 20px;
      }
      .course{
        text-align:center;
      }
      /* Styles pour petits écrans */
      @media (max-width: 768px) {
        .container {
          flex-direction: column; /* Colonne sur petits écrans */
        }
        .form-container, .tasks-container, .purchase-container {
          width: 100%; /* Occupe toute la largeur sur mobile */
        }
        .button-submit-taches, .button-delete {
          width: 100%; /* Boutons s'étendent sur toute la largeur */
        }
      }
      /* Styles pour grands écrans */
      @media (min-width: 769px) {
        .container {
          flex-direction: row;
        }
        .form-container {
          width: 25%;
        }
        .tasks-container {
          width: 40%;
        }
        .purchase-container {
          width: 25%;
        }
      }

      /* Autres styles existants */
      .date-time {
          margin-bottom: 15px;
          
      }
      .date-time #dateJour,
      .date-time #heure {
          font-size: 18px;
          color: #333;
          padding: 5px;
          display: inline-block;
          
      }
      form {
          max-width: 100%;
          padding: 20px;
          border: 3px solid black;
          border-radius: 10px;
          background-color: #f9f9f9;
          box-shadow: 1px 1px 1px black;
      }
      .formDate {
          max-width: 100%;
          padding-top: 15px;
          margin-bottom: 4%;
          border: 3px solid black;
          border-radius: 10px;
          background-color: #f9f9f9;
          text-align: center;
          box-shadow: 1px 1px 1px black;
      }
      label {
          display: block;
          margin-bottom: 10px;
          font-weight: bold;
      }
      input, textarea {
          width: 90%;
          padding: 8px;
          margin: 8px;
          margin-bottom: 20px;
          border: 1px solid #ccc;
          border-radius: 5px;
      }
      textarea {
          max-width: 100%;
          overflow: auto;
      }
      button {
          padding: 10px 20px;
          border: none;
          border-radius: 5px;
          cursor: pointer;
      }
      .button-submit-taches {
          background-color: #007bff;
          color: white;
          margin-left: auto; 
          display: block;  
          margin-top: 20px;
          box-shadow: 1px 1px 1px black;
          border : 2px solid black;
      }
      .button-submit-taches:hover {
          background-color: #0056b3;
      }
      .button-submit {
          background-color: #007bff;
          color: white;
          box-shadow: 1px 1px 1px black;
          border : 2px solid black;
      }
      .button-submit:hover {
          background-color: #0056b3;
      }
      .button-delete {
          background-color: #dc3545;
          color: white;
          box-shadow: 1px 1px 1px black;
          border : 2px solid black;
      }
      .button-delete:hover {
          background-color: #c82333;
      }
      .titre {
          font-family: fantasy;
          font-size: 3rem;
          color: aqua;
          text-align: center;
      }
      .task {
          border: 4px solid #ccc;
          padding: 10px;
          border-radius: 15px;
          background-color: #fff;
          margin-bottom: 15px;
          white-space: normal; /* Permet le retour à la ligne */
          word-wrap: break-word; /* Coupe le mot si trop long */
          box-shadow: 3px 3px 3px black;
      }
      .task h3 {
          margin-top: 0;
      }
      .task-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin:auto;
      }
      .faible {
          background-color: green;
      }
      .haute {
          background-color: red;
      }
      .moyenne {
          background-color: orange;
      }
      /* Style pour la colonne Achats */
      .purchase-item {
          border: 3px solid black;
          padding: 10px;
          border-radius: 20px;
          background-color: #fff;
          margin-bottom: 10px;
          box-shadow: 3px 3px 3px black;
          white-space: normal; /* Permet le retour à la ligne */
          word-wrap: break-word; /* Coupe le mot si trop long */

      }
      .purchase-item h3 {
          margin-top: 0;
      }
      .priority{
        margin-bottom : 5%;
        border-radius:10px;
      }
      .priority-qui-container {
        display: flex; /* Utilise Flexbox pour aligner horizontalement */
        gap: 20px; /* Espacement entre les éléments */
        align-items: center; /* Centre verticalement les éléments */  
        font-size: 18px;  
      }
      .nomQui{
        margin:auto;
        text-align:center;
        //- background-color:rgb(195, 50, 134);
        background-color:rgb(214, 203, 203);
        padding:5px;
        margin-bottom:10px;
        padding-left :10px;
        padding-right :10px;
        border-radius : 10px;
        border : 2px solid black;
        font-size: 18px;
        color:rgb(88, 51, 235);
        font-weight: 900;
      }

      .nomTache{
        margin:auto;
        text-align:center;
        background-color: #f9f9f9;
        padding:5px;
        padding-left :10px;
        padding-right :10px;
        border : 2px solid black;
        border-radius : 10px;
        font-size: 18px;
      }
      
      .date{
        background-color: #333;
        color: aqua;
        padding:10px;
        padding-left :10px;
        padding-right :10px;
        border-radius : 10px;
        text-align:center;
        font-size:1.3rem;
      }
      .taskDescritption{
        padding:0;
        margin:0;
        padding-bottom: 10px;
        text-align:center;
      }
      .dateFormat{
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }
  body
    .container
      .form-container
        p.titre Skill Up
        .formDate
          .date-time
            #dateJour 
            #heure 

        form(action="/" method="post")
          label(for="task") Tâches :
          input(type="text" id="task" name="task" required)
          
          label(for="date") Date et Heure début:
          input(type="datetime-local" id="date" name="date")

          label(for="datef") Date et heure de fin :
          input(type="datetime-local" id="datef" name="datef")
          
          label(for="description") Descriptions :
          textarea(id="description" name="description" rows="1")

          label(for="qui" class="qui") Chef de mission
          textarea(id="qui" name="qui" rows="1") 

          button(type="submit" class="button-submit-taches") Ajouter
          

      .tasks-container
        each task in tasks
          .task(data-task-id=task._id)(class=task.priority)
                .task-header
                h3.nomTache #{task.name}
                p.taskDescritption #{task.description}
                p.nomTache Début de mission
                .dateFormat 
                  p.date #{new Intl.DateTimeFormat('fr-FR', { day: 'numeric', month: 'long', year: 'numeric'}).format(new Date(task.date))}
                    p.date #{new Intl.DateTimeFormat('fr-FR', { hour: '2-digit', minute: '2-digit'}).format(new Date(task.date))}
                p.nomTache Fin de mission
                .dateFormat     
                  p.date #{new Intl.DateTimeFormat('fr-FR', { day: 'numeric', month: 'long', year: 'numeric'}).format(new Date(task.datef))}
                    p.date #{new Intl.DateTimeFormat('fr-FR', { hour: '2-digit', minute: '2-digit'}).format(new Date(task.datef))}
                h3.nomQui #{task.qui}  
                
                
                button(type="button" onclick="deleteTask(this)" class="button-delete") Supprimer                 

    script(src="/js/script.js")
    script.
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
            console.log('ServiceWorker registration successful with scope: ', registration.scope);
          }, function(err) {
            console.log('ServiceWorker registration failed: ', err);
          });
        });
      }
